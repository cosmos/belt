import './setup';
import {
    toCanonicalJSON,
    toCanonicalJSONClone,
    toCanonicalJSONString,
    toCanonicalJSONBytes
} from '../';

const knownJSON           = {
    b:         'b',
    a:         'a',
    undefined: undefined,
    null:      null,
    object:    {
        d:         'd',
        c:         'c',
        undefined: undefined,
        null:      null
    },
    array:     [{
        i:         'i',
        h:         'h',
        undefined: undefined,
        null:      null
    }, {
        g:         'g',
        f:         'f',
        undefined: undefined,
        null:      null
    }]
};
const canonicalJSON       = {
    a:         'a',
    array:     [{
        h:         'h',
        i:         'i',
        undefined: null,
        null:      null
    }, {
        f:         'f',
        g:         'g',
        undefined: null,
        null:      null
    }],
    b:         'b',
    null:      null,
    object:    {
        c:         'c',
        d:         'd',
        undefined: null,
        null:      null
    },
    undefined: null
};
const canonicalJSONString = '{"a":"a","array":[{"h":"h","i":"i","null":null,"undefined":null},{"f":"f","g":"g","null":null,"undefined":null}],"b":"b","null":null,"object":{"c":"c","d":"d","null":null,"undefined":null},"undefined":null}';
const canonicalJSONBytes  = [
    123,
    34,
    97,
    34,
    58,
    34,
    97,
    34,
    44,
    34,
    97,
    114,
    114,
    97,
    121,
    34,
    58,
    91,
    123,
    34,
    104,
    34,
    58,
    34,
    104,
    34,
    44,
    34,
    105,
    34,
    58,
    34,
    105,
    34,
    44,
    34,
    110,
    117,
    108,
    108,
    34,
    58,
    110,
    117,
    108,
    108,
    44,
    34,
    117,
    110,
    100,
    101,
    102,
    105,
    110,
    101,
    100,
    34,
    58,
    110,
    117,
    108,
    108,
    125,
    44,
    123,
    34,
    102,
    34,
    58,
    34,
    102,
    34,
    44,
    34,
    103,
    34,
    58,
    34,
    103,
    34,
    44,
    34,
    110,
    117,
    108,
    108,
    34,
    58,
    110,
    117,
    108,
    108,
    44,
    34,
    117,
    110,
    100,
    101,
    102,
    105,
    110,
    101,
    100,
    34,
    58,
    110,
    117,
    108,
    108,
    125,
    93,
    44,
    34,
    98,
    34,
    58,
    34,
    98,
    34,
    44,
    34,
    110,
    117,
    108,
    108,
    34,
    58,
    110,
    117,
    108,
    108,
    44,
    34,
    111,
    98,
    106,
    101,
    99,
    116,
    34,
    58,
    123,
    34,
    99,
    34,
    58,
    34,
    99,
    34,
    44,
    34,
    100,
    34,
    58,
    34,
    100,
    34,
    44,
    34,
    110,
    117,
    108,
    108,
    34,
    58,
    110,
    117,
    108,
    108,
    44,
    34,
    117,
    110,
    100,
    101,
    102,
    105,
    110,
    101,
    100,
    34,
    58,
    110,
    117,
    108,
    108,
    125,
    44,
    34,
    117,
    110,
    100,
    101,
    102,
    105,
    110,
    101,
    100,
    34,
    58,
    110,
    117,
    108,
    108,
    125
];

describe('canonical', () => {
    describe('toCanonicalJSON', () => {
        it('converts json to canonical json', () => {
            const actual = toCanonicalJSON(knownJSON);
            expect(actual).toEqual(canonicalJSON);
        });
    });

    describe('toCanonicalJSONClone', () => {
        it('converts json to canonical json clone', () => {
            const actual = toCanonicalJSONClone(canonicalJSON);
            expect(actual).toEqual(canonicalJSON);
        });
    });

    describe('toCanonicalJSONString', () => {
        it('converts json to canonical json string', () => {
            const actual = toCanonicalJSONString(knownJSON);
            expect(actual).toBe(canonicalJSONString);
        });
    });

    describe('toCanonicalJSONBytes', () => {
        it('converts json to canonical json bytes', () => {
            const actual = toCanonicalJSONBytes(knownJSON);
            expect(actual).toBeBytes(canonicalJSONBytes);
        });
    });
});
